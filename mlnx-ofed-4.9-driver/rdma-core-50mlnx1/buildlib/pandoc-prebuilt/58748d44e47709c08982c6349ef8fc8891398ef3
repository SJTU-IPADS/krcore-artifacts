.\" Automatically generated by Pandoc 1.16.0.2
.\"
.TH "mlx5dv_devx_create_cmd_comp, mlx5dv_devx_destroy_cmd_comp, get_async" "3" "" "" ""
.hy
.SH NAME
.PP
mlx5dv_devx_create_cmd_comp \- Create a command completion to be used
for DEVX asynchronous commands.
.PP
mlx5dv_devx_destroy_cmd_comp \- Destroy a devx command completion.
.PP
mlx5dv_devx_get_async_cmd_comp \- Get an asynchronous command
completion.
# SYNOPSIS
.IP
.nf
\f[C]
#include\ <infiniband/mlx5dv.h>

struct\ mlx5dv_devx_cmd_comp\ {
\ \ \ \ int\ fd;
};

struct\ mlx5dv_devx_cmd_comp\ *
mlx5dv_devx_create_cmd_comp(struct\ ibv_context\ *context)

void\ mlx5dv_devx_destroy_cmd_comp(struct\ mlx5dv_devx_cmd_comp\ *cmd_comp)

struct\ mlx5dv_devx_async_cmd_hdr\ {
\ \ \ \ uint64_t\ \ \ \ wr_id;
\ \ \ \ uint8_t\ \ \ \ \ out_data[];
};

int\ mlx5dv_devx_get_async_cmd_comp(struct\ mlx5dv_devx_cmd_comp\ *cmd_comp,
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ struct\ mlx5dv_devx_async_cmd_hdr\ *cmd_resp,
\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ size_t\ cmd_resp_len)
\f[]
.fi
.SH DESCRIPTION
.PP
Create or destroy a command completion to be used for DEVX asynchronous
commands.
.PP
The create verb exposes an mlx5dv_devx_cmd_comp object that can be used
as part of asynchronous DEVX commands.
This lets an application run asynchronously without blocking and once
the response is ready read it from this object.
.PP
The response can be read by the mlx5dv_devx_get_async_cmd_comp() API,
upon response the \f[I]wr_id\f[] that was supplied upon the asynchronous
command is returned and the \f[I]out_data\f[] includes the data itself.
The application must supply a large enough buffer to match any command
that was issued on the \f[I]cmd_comp\f[], its size is given by the input
\f[I]cmd_resp_len\f[] parameter.
.SH ARGUMENTS
.TP
.B \f[I]context\f[]
.IP
.nf
\f[C]
RDMA\ device\ context\ to\ create\ the\ action\ on.
\f[]
.fi
.RS
.RE
.TP
.B \f[I]cmd_comp\f[]
The command completion object.
.RS
.RE
.TP
.B \f[I]cmd_resp\f[]
The output data from the asynchronous command.
.RS
.RE
.TP
.B \f[I]cmd_resp_len\f[]
The output buffer size to hold the response.
.RS
.RE
.SH RETURN VALUE
.PP
Upon success \f[I]mlx5dv_devx_create_cmd_comp\f[] will return a new
\f[I]struct mlx5dv_devx_cmd_comp\f[] object, on error NULL will be
returned and errno will be set.
.PP
Upon success \f[I]mlx5dv_devx_get_async_cmd_comp\f[] will return 0,
otherwise errno will be returned.
.SH SEE ALSO
.PP
\f[I]mlx5dv_open_device(3)\f[], \f[I]mlx5dv_devx_obj_create(3)\f[]
.SH AUTHOR
.PP
Yishai Hadas <yishaih@mellanox.com>
